"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function generator(web3){return new _promise2["default"](function(r,j){web3.version.getNetwork(function(err,net){err?j(errors.NETWORK_UNCONNECTED):r(net)})}).then(function(network){if(deployed.actGenerator.hasOwnProperty(network)){var c=web3.eth.contract(abi.actGenerator).at(deployed.actGenerator[network]);return c=new Contract(c)}return _promise2["default"].reject(errors.UNSUPPORTED_NETWORK)})}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),bin=require("./bin"),abi=require("./abi"),errors=require("./errors"),deployed=require("./deployed"),Contract=require("./contract");exports.deployActivity=function(token,n,m,decimals,web3){var _n=new web3.BigNumber(n);_n=_n.mul(Math.pow(10,decimals));var _m=new web3.BigNumber(m);return _m=_m.mul(Math.pow(10,decimals)),_m=_m.dividedToIntegerBy(Math.pow(10,12)),new _promise2["default"](function(r,j){var c=web3.eth.contract(abi.activity),data=c["new"].getData(token,_n,_m,{data:bin.activity});web3.eth.estimateGas({data:data},function(err,gas){err?j(err):web3.eth.sendTransaction({data:data,gas:gas},function(err,res){err?j(err):r(res)})})})},exports.activityAt=function(address,web3){var c=web3.eth.contract(abi.activity).at(address);return c=new Contract(c)},exports.generator=generator,exports.getnActivity=function(token,n,m,decimals,web3){var _n=new web3.BigNumber(n);_n=_n.mul(Math.pow(10,decimals));var _m=new web3.BigNumber(m);return _m=_m.mul(Math.pow(10,decimals)),_m=_m.dividedToIntegerBy(Math.pow(10,12)),generator(web3).then(function(actGen){return actGen.price().then(function(_p){return actGen.genSendN(token,_n,_m,{value:_p})})})};