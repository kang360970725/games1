"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Contract(instance){this.instance=instance,this.init()}function _paserOutput(raw,type){return"address"===type?raw.toString():raw}var _assign=require("babel-runtime/core-js/object/assign"),_assign2=_interopRequireDefault(_assign),_promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise);Contract.prototype.init=function(){var self=this;self.instance.abi.forEach(function(signature){self[signature.name]=function(){var argsABI=signature.inputs,outputsABI=signature.outputs,_callback=void 0;if("function"==typeof arguments[arguments.length-1]&&(_callback=Array.prototype.pop.call(arguments)),arguments.length<argsABI.length){var msg=signature.name+" needs "+argsABI.length+" parameters and 1 callback at least";return _callback?_callback(msg):_promise2["default"].reject(msg)}var options=null;arguments.length===argsABI.length+1&&(options=Array.prototype.pop.call(arguments));for(var args=[],i=0;i<argsABI.length;i++)args.push(arguments[i]);null!=options&&args.push(options);var retP={},retPromise=new _promise2["default"](function(resolve,reject){retP.resolve=resolve,retP.reject=reject}),callback=void 0;return callback=_callback?function(err,results){if(err)return _callback(err);if(signature.constant){if(1===outputsABI.length)return _callback(null,_paserOutput(results,outputsABI[0].type));for(var ret=[],i=0;i<outputsABI.length;i++)ret.push(_paserOutput(results[i],outputsABI[i].type));return _callback(null,ret)}return _callback(null,results)}:function(err,results){if(err)retP.reject(err);else if(signature.constant)if(1===outputsABI.length)retP.resolve(_paserOutput(results,outputsABI[0].type));else{for(var ret=[],i=0;i<outputsABI.length;i++)ret.push(_paserOutput(results[i],outputsABI[i].type));retP.resolve(ret)}else retP.resolve(results)},args.push(callback),self.instance[signature.name].apply(self.instance,args),retPromise},self["gasOf_"+signature.name]=function(){var argsABI=signature.inputs,_callback=void 0;if("function"==typeof arguments[arguments.length-1]&&(_callback=Array.prototype.pop.call(arguments)),arguments.length<argsABI.length){var msg=signature.name+" needs "+argsABI.length+" parameters at least";return _callback?_callback(msg):_promise2["default"].reject(msg)}var options={};arguments.length===argsABI.length+1&&(options=Array.prototype.pop.call(arguments));var retP={},retPromise=new _promise2["default"](function(resolve,reject){retP.resolve=resolve,retP.reject=reject}),callback=void 0;callback=_callback?function(err,gas){return err?_callback(err):_callback(null,gas)}:function(err,gas){err?retP.reject(err):retP.resolve(gas)};var to=self.instance.address,data=self.instance[signature.name].getData.apply(self.instance,arguments),tx=(0,_assign2["default"])(options,{data:data,to:to});return self.instance._eth.estimateGas(tx,callback),retPromise},self["dataOf_"+signature.name]=function(){var argsABI=signature.inputs,_callback=void 0;if("function"==typeof arguments[arguments.length-1]&&(_callback=Array.prototype.pop.call(arguments)),arguments.length<argsABI.length){var msg=signature.name+" needs "+argsABI.length+" parameters at least";return _callback?_callback(msg):_promise2["default"].reject(msg)}arguments.length===argsABI.length+1&&Array.prototype.pop.call(arguments);var retP={},retPromise=new _promise2["default"](function(resolve,reject){retP.resolve=resolve,retP.reject=reject}),callback=void 0;callback=_callback?function(err,gas){return err?_callback(err):_callback(null,gas)}:function(err,gas){err?retP.reject(err):retP.resolve(gas)};var data=self.instance[signature.name].getData.apply(self.instance,arguments);return callback(null,data),retPromise}})},module.exports=Contract;