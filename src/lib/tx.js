"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),errors=require("./errors"),TX_TYPES=["AIRDROP","BATCH_SEND","ACTIVITY","ERC20","APPROVE","TRANSFER"],TYPES={};TX_TYPES.forEach(function(e,i){TYPES[e]=i+1});var TX_STATUS=["DONE","ERROR","NONE","PENDING"],STATUS={};TX_STATUS.forEach(function(e,i){STATUS[e]=i}),exports.TYPES=TYPES,exports.STATUS=STATUS,exports.tx_status=function(tx,web3){var status={};return new _promise2["default"](function(r,j){web3.eth.getTransaction(tx,function(err,t){err?j(errors.RPC_ERROR):r(t)})}).then(function(txObj){return"undefined"==typeof txObj?(status.status=STATUS.NONE,status):(status.input=txObj.input,null===txObj.blockNumber?(status.status=STATUS.PENDING,status):new _promise2["default"](function(r,j){web3.eth.getTransactionReceipt(tx,function(err,receipt){err?j(errors.RPC_ERROR):r(receipt)})}).then(function(receipt){return status.status="0x0"===tx.status?STATUS.ERROR:STATUS.DONE,status.contractAddress=receipt.contractAddress,status.logs=receipt.logs,status}))})};